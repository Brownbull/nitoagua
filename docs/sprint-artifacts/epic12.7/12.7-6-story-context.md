# Story 12.7-6: Admin Dispute Resolution - Story Context

## Technical Analysis

### Dependency

**Depends on:** Story 12.7-5 (Consumer Dispute Option)

Cannot implement until disputes table and dispute creation exists.

### Implementation Plan

#### 1. Files to Create

| File | Purpose |
|------|---------|
| `src/app/admin/disputes/page.tsx` | Disputes queue page |
| `src/app/admin/disputes/[id]/page.tsx` | Dispute detail page |
| `src/components/admin/dispute-queue.tsx` | Queue list component |
| `src/components/admin/dispute-detail.tsx` | Detail view component |
| `src/lib/actions/admin-disputes.ts` | Admin dispute actions |

#### 2. Admin Sidebar Integration

Add to `src/components/admin/admin-sidebar.tsx`:
```tsx
{ name: "Disputas", href: "/admin/disputes", icon: AlertTriangle }
```

#### 3. Server Actions

```typescript
// admin-disputes.ts
export async function getOpenDisputes()
export async function getDisputeDetail(id: string)
export async function resolveDispute(id: string, resolution: string)
export async function rejectDispute(id: string, reason: string)
```

### UI Components

#### Disputes Queue
- List of open disputes
- Filter by status (open, investigating, resolved)
- Sort by date
- Quick actions: View, Assign

#### Dispute Detail
- Consumer info, Provider info
- Request details
- Dispute reason and description
- Timeline of events
- Resolution form: outcome, notes
- Actions: Resolve, Reject, Escalate

### Acceptance Criteria Mapping

| AC | Implementation |
|----|----------------|
| AC12.7.6.1 | Disputes visible in admin panel |
| AC12.7.6.2 | Admin can view dispute details |
| AC12.7.6.3 | Admin can resolve dispute |
| AC12.7.6.4 | Admin can reject dispute |
| AC12.7.6.5 | Both parties notified of outcome |
