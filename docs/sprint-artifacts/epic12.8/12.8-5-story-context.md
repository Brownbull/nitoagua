# Story 12.8-5: Admin Providers UX & Ratings - Context

## Quick Reference

| Field | Value |
|-------|-------|
| **Story** | 12.8-5: Admin Providers UX & Ratings |
| **Priority** | P2 (Medium) |
| **Points** | 5 |
| **Bugs** | BUG-R2-010, BUG-R2-011 |

## Problem Summary

1. Status and Area filters on separate rows (inefficient)
2. Provider cards missing email
3. No rating display on cards
4. No rating history in provider detail

## Key Files

| File | Purpose |
|------|---------|
| `src/app/admin/providers/page.tsx` | Side-by-side filters |
| `src/components/admin/provider-card.tsx` | Add email + rating |
| `src/app/admin/providers/[id]/page.tsx` | Add ratings section |
| `src/lib/actions/providers.ts` | Include ratings in query |

## Database Fields (Already Exist)

```sql
profiles.average_rating  -- DECIMAL(2,1)
profiles.rating_count    -- INTEGER
profiles.email           -- TEXT

ratings (
  rating INTEGER,
  comment TEXT,
  consumer_id UUID,
  created_at TIMESTAMPTZ
)
```

## Implementation Steps

1. Put filters side-by-side: `flex gap-2`
2. Add email to provider card with ‚úâÔ∏è icon
3. Add rating badge to card top-right: `‚≠ê 4.5 (12)`
4. Add ratings section to detail with history

## Card Layout Target

```
[üë§] Juan Proveedor      ‚≠ê 4.5 (12)
     üìû +56912345678
     ‚úâÔ∏è juan@email.com
     [üü¢ Activo]
```

## Testing Focus

- Filters on same row
- Email visible on cards
- Rating visible on cards
- Rating history in detail page
